# Café Number Rush ☕

カフェ経営×数字クリッカーゲーム - Touch the Numbers風の新感覚ゲーム

## 概要

エマというバリスタと一緒に、注文番号を正確な順序でクリックしてカフェを成長させるゲームです。数字を1から順番にクリックする「Touch the Numbers」のゲームプレイに、カフェ経営とキャラクター成長要素を組み合わせた独創的な作品です。

## 特徴

- **必須4画面**: タイトル、会話、メインゲーム、マルチエンディング
- **完全CSV外部化**: 15個のCSVファイルで全データ管理（BOM付きUTF-8）
- **4種類のエンディング**: スコアに応じた分岐ストーリー
- **キャラクター成長**: エマの5段階レベルアップ
- **レスポンシブ対応**: モバイル〜デスクトップまで対応

## 開発・実行方法

### 必要な環境

- Node.js 16.0以上
- npm

### インストール

```bash
npm install
```

### 開発モード実行

```bash
npm start
```

### 本番ビルド

```bash
npm run build
```

## ゲームシステム

### 基本ルール

1. 画面に表示される数字を1から順番にクリック
2. 制限時間内に全数字をクリックしてレベルクリア
3. レベルが上がると数字が増えて難易度アップ
4. 正確性と速度でスコアを獲得

### レベル進行

- レベル1-2: 5つの数字、15-14秒
- レベル3-4: 6-7つの数字、13-12秒
- レベル5-6: 8-9つの数字、11-10秒
- レベル7-8: 10-12個の数字、9-8秒
- レベル9-10: 13-15個の数字、8秒

### エンディング分岐

- **カフェマスター** (2000⭐以上): 大成功エンディング
- **人気店オーナー** (1200-1999⭐): 成功エンディング
- **街の憩いの場** (600-1199⭐): 普通エンディング
- **新人バリスタ** (600⭐未満): 成長エンディング

## 技術仕様

### アーキテクチャ

- **フロントエンド**: HTML5, CSS3, Vanilla JavaScript
- **デスクトップ**: Electron
- **データ管理**: CSV（BOM付きUTF-8）
- **保存**: LocalStorage

### ファイル構成

```
├── index.html              # メインHTML
├── main.js                 # Electronメイン
├── package.json            # プロジェクト設定
├── data/                   # CSVデータ（15ファイル）
│   ├── scenes.csv          # シーン管理
│   ├── characters.csv      # キャラクター設定
│   ├── dialogues.csv       # 会話データ
│   └── ...
├── css/                    # スタイル
│   ├── main.css           # メインスタイル
│   ├── animations.css     # アニメーション
│   └── responsive.css     # レスポンシブ
├── js/                     # JavaScript
│   ├── main.js            # メインアプリ
│   ├── csv-loader.js      # CSV読み込み
│   ├── ui-manager.js      # UI管理
│   ├── audio-manager.js   # 音響管理
│   └── game-controller.js # ゲームロジック
└── assets/                # ゲーム素材
    ├── backgrounds/       # 背景画像
    ├── characters/        # キャラクター画像
    ├── ui/               # UI画像
    └── audio/            # 音響ファイル
```

### CSVデータ管理

全ゲームデータはBOM付きUTF-8形式のCSVファイルで管理され、Excel等で直接編集可能：

- `scenes.csv` - シーン・背景・BGM設定
- `characters.csv` - キャラクター基本データ
- `dialogues.csv` - 全会話・感情表現
- `character_levels.csv` - レベル別外見変化
- `endings.csv` - エンディング分岐設定
- `ui_*.csv` - UI要素・レイアウト設定
- `game_balance.csv` - ゲームバランス調整
- `sound_effects.csv` - 音響効果設定
- `progression_rewards.csv` - 進行報酬

### 操作方法

- **マウス/タッチ**: 数字ボタンクリック
- **キーボード**: 数字キー（1-9, 0）でも操作可能
- **スペースキー**: 会話画面で次へ進む
- **Escキー**: 設定画面開閉

## 開発のポイント

### CSV管理システム

```javascript
// BOM付きUTF-8での読み込み
const BOM = '\uFEFF';
const text = await response.text();
if (text.charCodeAt(0) === 0xFEFF) {
    text = text.slice(1); // BOM除去
}
```

### レスポンシブ対応

- モバイル: 0.8倍スケール、縦レイアウト
- タブレット: 0.9倍スケール、コンパクト
- デスクトップ: 標準スケール
- 大画面: 1.1倍スケール

### アクセシビリティ

- キーボード操作対応
- フォーカス表示
- 視差軽減モード対応
- ハイコントラスト対応

## トラブルシューティング

### 音が出ない場合

1. ブラウザの音声許可を確認
2. 設定画面で音量を調整
3. デベロッパーツールでエラーを確認

### CSVが文字化けする場合

1. ファイルがBOM付きUTF-8で保存されているか確認
2. Excelで開く場合は「データ」→「テキストファイル」から開く

### パフォーマンスが悪い場合

1. ブラウザのハードウェアアクセラレーションを有効化
2. 他のタブ・アプリを閉じる
3. `cafeNumberRush.getPerformanceInfo()` でメモリ使用量確認

## ライセンス

MIT License

## 開発者

Claude Code

---

**プレイ時間**: 15-20分  
**対象年齢**: 全年齢  
**ジャンル**: クリッカーゲーム、カフェ経営シミュレーション